(()=>{"use strict";var e={2337:(e,n,t)=>{t.r(n),t.d(n,{default:()=>y});var r=t(6357),o=t(885),i=t(2853),a=t(6785),l=t(5337),s=t(1785);(0,a.default)({size:1e4,storageBackend:l.default,defaultExpires:864e5,enableCache:!0,reconnect:!0,sync:{}});var c=(0,i.createContext)(),u=function(e){var n=e.children,t=(0,i.useState)({"Parking 1":[!1,!1,!1],"Parking 2":[!1,!1,!1]}),r=(0,o.default)(t,2),a=r[0],l=r[1];return(0,i.useEffect)((function(){var e=new Paho.MQTT.Client("test.mosquitto.org",8081,"clientId"),n=function(){console.log("onConnect"),e.subscribe("parking/sensors")};return e.onConnectionLost=function(t){0!==t.errorCode&&(console.log("onConnectionLost:"+t.errorMessage),setTimeout((function(){e.connect({onSuccess:n,useSSL:!0})}),10))},e.onMessageArrived=function(e){console.log("Mensaje MQTT recibido:",e.payloadString);var n=e.payloadString.trim().split(",");if(6===n.length&&n.every((function(e){return!isNaN(e)}))){var t=n.map((function(e){return"255"===e}));l({"Parking 1":t.slice(0,3),"Parking 2":t.slice(3,6)})}},e.connect({onSuccess:n,useSSL:!0}),function(){e.isConnected()&&e.disconnect()}}),[]),(0,s.jsx)(c.Provider,{value:{slots:a,setSlots:l},children:n})},d=t(2115),f=t(7231),g=t(3110),h=t(1950),v=t(9502).default.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:24,marginBottom:20},statusContainer:{alignItems:"center",marginBottom:10},fullMessage:{fontSize:18,color:"red",fontWeight:"bold"},occupiedCounter:{fontSize:16,color:"blue"},slotContainer:{alignItems:"center",marginTop:3},slotText:{marginTop:3},led:{width:50,height:50,borderRadius:25,margin:10},ledOn:{backgroundColor:"red"},ledOff:{backgroundColor:"green"}});const p=function(e){var n=e.tabName,t=(0,i.useContext)(c).slots,r=Object.values(t).flat().filter((function(e){return e})).length,o=r===Object.values(t).flat().length;return(0,s.jsxs)(g.default,{style:v.container,children:[(0,s.jsxs)(g.default,{style:v.statusContainer,children:[o&&(0,s.jsx)(h.default,{style:v.fullMessage,children:"Estacionamiento Totalmente Ocupado"}),(0,s.jsxs)(h.default,{style:v.occupiedCounter,children:["Slots Ocupados: ",r]})]}),(0,s.jsx)(h.default,{style:v.title,children:n}),t[n].map((function(e,n){return(0,s.jsxs)(g.default,{style:v.slotContainer,children:[(0,s.jsx)(g.default,{style:[v.led,e?v.ledOn:v.ledOff]}),(0,s.jsxs)(h.default,{style:v.slotText,children:["Slot ",n+1]})]},n)}))]})};var b=(0,d.default)(),j=(0,f.default)();function m(){return(0,s.jsxs)(j.Navigator,{children:[(0,s.jsx)(j.Screen,{name:"Parking 1",children:function(){return(0,s.jsx)(p,{tabName:"Parking 1"})}}),(0,s.jsx)(j.Screen,{name:"Parking 2",children:function(){return(0,s.jsx)(p,{tabName:"Parking 2"})}})]})}const x=function(){return(0,s.jsx)(b.Navigator,{children:(0,s.jsx)(b.Screen,{name:"Main",component:m,options:{headerShown:!1}})})};const y=function(){return(0,s.jsx)(u,{children:(0,s.jsx)(r.default,{children:(0,s.jsx)(x,{})})})}}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var i=n[r]={exports:{}};return e[r].call(i.exports,i,i.exports,t),i.exports}t.m=e,(()=>{var e=[];t.O=(n,r,o,i)=>{if(!r){var a=1/0;for(u=0;u<e.length;u++){for(var[r,o,i]=e[u],l=!0,s=0;s<r.length;s++)(!1&i||a>=i)&&Object.keys(t.O).every((e=>t.O[e](r[s])))?r.splice(s--,1):(l=!1,i<a&&(a=i));if(l){e.splice(u--,1);var c=o();void 0!==c&&(n=c)}}return n}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[r,o,i]}})(),t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};t.O.j=n=>0===e[n];var n=(n,r)=>{var o,i,[a,l,s]=r,c=0;if(a.some((n=>0!==e[n]))){for(o in l)t.o(l,o)&&(t.m[o]=l[o]);if(s)var u=s(t)}for(n&&n(r);c<a.length;c++)i=a[c],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(u)},r=self.webpackChunkweb=self.webpackChunkweb||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))})();var r=t.O(void 0,[43],(()=>t(6099)));r=t.O(r)})();
//# sourceMappingURL=main.66f3b037.js.map